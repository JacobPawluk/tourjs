mkdir -p ./android/app/src/main/assets/
echo "bundling!"
npx react-native bundle --platform android\
                        --dev false\
                        --entry-file index.js\
                        --bundle-output android/app/src/main/assets/index.android.bundle\
                        --assets-dest android/app/build/intermediates/res/merged/release/

echo "done bundling, doing hack stackoverflow fix for duplicate drawables"

rm -rf android/app/src/main/res/drawable-* 
rm -rf android/app/src/main/res/raw/* 
cd android 
./gradlew assembleRelease
cd ..
adb uninstall com.tourjsrn2
adb install ./android/app/build/outputs/apk/release/app-release.apk
echo "Installed on android device"

scp ./android/app/build/outputs/apk/release/app-release.apk art@tourjs.ca:/var/www/tjs.apk